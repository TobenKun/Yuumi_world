---
{"dg-publish":true,"permalink":"/CODING/C언어/005.6 끝도 없이 늘어나는 하위문서.../","noteIcon":"2"}
---

# 극한까지 깎아보자
이제는 명령어 하나하나가 소중한 단계
한 개라도 줄일 수 있으면 줄여보자.

###### a_to_b
```c
void	a_to_b(t_stacks *stacks, int total, int small_pivot, int big_pivot)
{
	while (total > 0)
	{
		if (stacks->a_head->content <= small_pivot)
		{
			push_b(stacks, 0);
			if (stacks->b_head->next != 0
				&& stacks->a_head->content > big_pivot)
			{
				rotate_both(stacks, 0);
				total--;
			}
			else if (stacks->b_head->next != 0
				&& stacks->b_head->next->content > small_pivot)
				rotate_b(stacks, 0);
		}
		else if (stacks->a_head->content <= big_pivot)
			push_b(stacks, 0);
		else
			rotate_a(stacks, 0);
		total--;
	}
	while (stack_count(stacks->a_head) > 3)
		push_b(stacks, 0);
	manual_sort(stacks, stack_count(stacks->a_head));
}
```

a스택에서 b 스택으로 옮길 때도 두가지 최적화를 더했다.
1. 1/3 값보다 작은 값은 pb를 한 뒤에 rb를 해줘야 한다.
   -> 굳이 rb를 할 필요가 없을 때는 하지 않기. ex) 1/3 값만 들어가있을 때
2. rb를 해야하는 상황에서 a 스택의 헤드를 확인하고 ra가 필요하면 rr 하기
   
   이거 2개로 8 ~ 10 개정도 명령어가 줄었다.


######